<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>8086 Mini Simulator + Morse ↔ Text + ASM Generator</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #000;
  --panel: #0a0a0a;
  --muted: #00ff00;
  --accent: #00cc00;
  --accent2: #00ff66;
  --card: #0a0a0a;
  --glow: #00ff00;
}
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; font-family: 'VT323', monospace; color: var(--muted); background: var(--bg); }
.container { max-width: 1500px; margin: 20px auto; padding: 18px; display: grid; grid-template-columns: 1fr 420px 420px; gap: 16px; }
.header { grid-column: 1/-1; display: flex; align-items: center; justify-content: space-between; }
.brand { display: flex; align-items: center; gap: 12px; }
.logo { width: 44px; height: 44px; background: var(--accent); display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--bg); text-shadow: 0 0 5px var(--glow); }
h1 { font-size: 18px; margin: 0; text-shadow: 0 0 3px var(--glow); }
.card { background: var(--card); border: 1px solid var(--accent); padding: 12px; border-radius: 0; box-shadow: 0 0 10px var(--glow); }
.editor { height: 420px; display: flex; flex-direction: column; }
textarea.code, textarea.morseArea, textarea.asmArea { flex: 1; width: 100%; resize: none; background: var(--bg); border: 1px solid var(--accent); padding: 10px; color: var(--muted); font-family: 'VT323', monospace; font-size:16px; text-shadow:0 0 2px var(--glow);}
.controls { display:flex; gap:8px; margin-top:8px;}
.btn { background: var(--accent); border:1px solid var(--accent2); padding:8px 10px; border-radius:0; color:var(--bg); font-weight:600; cursor:pointer; text-shadow:0 0 3px var(--glow);}
.btn:hover { background: var(--accent2); box-shadow:0 0 5px var(--glow);}
.btn.ghost { background:transparent; border:1px solid var(--accent); color:var(--muted);}
.side { display:flex; flex-direction:column; gap:12px;}
.small { font-size:14px; color:var(--muted); text-shadow:0 0 2px var(--glow);}
.panel { padding:10px; border-radius:0; background: var(--panel); border:1px solid var(--accent); box-shadow:0 0 5px var(--glow);}
.row { display:flex; gap:8px;}
.regs { display:grid; grid-template-columns:repeat(2,1fr); gap:8px;}
.reg { padding:6px; border-radius:0; background:var(--bg); border:1px solid var(--accent); text-shadow:0 0 2px var(--glow);}
.console { height:140px; overflow:auto; background:var(--bg); border:1px solid var(--accent); padding:8px; border-radius:0; text-shadow:0 0 2px var(--glow);}
label { font-size:14px;}
.footerNote { grid-column:1/-1; font-size:14px; margin-top:8px; text-shadow:0 0 2px var(--glow);}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="brand">
      <div class="logo">86</div>
      <div>
        <h1>8086 Mini Simulator + Morse ↔ Text + ASM Generator</h1>
        <div class="small">Editable emulator + live Morse converter + Text → Morse ASM generator</div>
      </div>
    </div>
  </div>

  <!-- Left: Editor + Simulator -->
  <div>
    <div class="card editor">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <label class="small">Assembly editor / Morse input</label>
        <div class="row">
          <button class="btn" id="assembleBtn">Assemble & Run</button>
          <button class="btn ghost" id="stepBtn">Step</button>
          <button class="btn ghost" id="resetBtn">Reset</button>
        </div>
      </div>
      <textarea id="code" class="code" spellcheck="false">; Example: HELLO in Morse
; . = 46, - = 45, / = 47
MOV AX,46
OUT AX
MOV AX,46
OUT AX
MOV AX,46
OUT AX
MOV AX,46
OUT AX
MOV AX,47
OUT AX
MOV AX,46
OUT AX
MOV AX,47
OUT AX
MOV AX,46
OUT AX
MOV AX,45
OUT AX
MOV AX,46
OUT AX
MOV AX,46
OUT AX
MOV AX,47
OUT AX
MOV AX,46
OUT AX
MOV AX,45
OUT AX
MOV AX,46
OUT AX
MOV AX,46
OUT AX
MOV AX,47
OUT AX
MOV AX,45
OUT AX
MOV AX,45
OUT AX
MOV AX,45
OUT AX
HLT
</textarea>
      <div class="controls">
        <button class="btn ghost" id="compileBtn">Compile (assemble)</button>
        <button class="btn ghost" id="downloadBtn">Download .asm</button>
        <div style="flex:1"></div>
        <label class="small" style="align-self:center">Speed:</label>
        <input id="speed" type="range" min="50" max="1200" value="300" />
      </div>
    </div>

    <div style="height:12px"></div>
    <div class="card panel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <label class="small">Console</label>
        <button class="btn ghost" id="clearConsole">Clear</button>
      </div>
      <pre id="console" class="console"></pre>
    </div>
  </div>

  <!-- Middle: Morse converter -->
  <div class="side">
    <div class="card panel">
      <label class="small">Morse ↔ Text (live)</label>
      <textarea id="morseInput" class="morseArea" placeholder="Type text or paste Morse (.- -...)"></textarea>
      <div style="display:flex;gap:8px;margin-top:6px">
        <button class="btn" id="toMorse">Text → Morse</button>
        <button class="btn" id="toText">Morse → Text</button>
        <button class="btn ghost" id="pasteToEditor">Decode → Editor</button>
        <button class="btn ghost" id="copyMorse">Copy</button>
      </div>
      <div class="small">Letters separated by space, words by <kbd>/</kbd>. Press <kbd>Decode → Editor</kbd> to replace editor text with decoded assembly.</div>
    </div>
  </div>

  <!-- Right: Text → Morse ASM generator -->
  <div class="side">
    <div class="card panel">
      <label class="small">Text → Morse Assembly Generator</label>
      <textarea id="textInput" class="asmArea" placeholder="Type words or sentences here"></textarea>
      <div style="display:flex;gap:8px;margin-top:6px">
        <button class="btn" id="generateASM">Generate ASM</button>
        <button class="btn ghost" id="copyASM">Copy</button>
        <button class="btn ghost" id="pasteASM">Paste → Editor</button>
      </div>
      <div class="small">Generates MOV AX,46/45/47 + OUT AX for each Morse symbol. Copy & paste to simulator editor to run.</div>
      <textarea id="asmOutput" class="asmArea" readonly></textarea>
    </div>
  </div>

  <div class="footerNote">
    Tips: . = 46, - = 45, / = 47. Created by Anirudh Ramakrishnan
  </div>
</div>

<script>
// Morse table
const MORSE = {
  'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.','F':'..-.','G':'--.','H':'....','I':'..','J':'.---','K':'-.-','L':'.-..','M':'--','N':'-.','O':'---','P':'.--.','Q':'--.-','R':'.-.','S':'...','T':'-','U':'..-','V':'...-','W':'.--','X':'-..-','Y':'-.--','Z':'--..',
  '0':'-----','1':'.----','2':'..---','3':'...--','4':'....-','5':'.....','6':'-....','7':'--...','8':'---..','9':'----.'
};
const REV_MORSE = Object.fromEntries(Object.entries(MORSE).map(([k,v])=>[v,k]));

const codeEl=document.getElementById('code');
const morseEl=document.getElementById('morseInput');
const toMorseBtn=document.getElementById('toMorse');
const toTextBtn=document.getElementById('toText');
const pasteToEditor=document.getElementById('pasteToEditor');
const copyMorse=document.getElementById('copyMorse');

toMorseBtn.onclick=()=>{ morseEl.value=textToMorse(morseEl.value||codeEl.value); }
toTextBtn.onclick=()=>{ morseEl.value=morseToText(morseEl.value); }
copyMorse.onclick=()=>{ navigator.clipboard?.writeText(morseEl.value).then(()=>alert('Copied')) }
pasteToEditor.onclick=()=>{ codeEl.value=morseToText(morseEl.value); }

function textToMorse(text){
  return text.toUpperCase().split(' ').map(word=>{
    return word.split('').map(ch=>MORSE[ch]||'?').join(' ');
  }).join(' / ');
}
function morseToText(morse){
  morse=morse.replace(/\|/g,' / ');
  const words=morse.split(/\s{2,}|\s\/\s/).map(w=>w.trim()).filter(Boolean);
  return words.map(w=>w.split(/\s+/).map(sig=>REV_MORSE[sig]||'?').join('')).join(' ');
}

// Text → Morse ASM generator
const textInput=document.getElementById('textInput');
const asmOutput=document.getElementById('asmOutput');
const generateASM=document.getElementById('generateASM');
const copyASM=document.getElementById('copyASM');
const pasteASM=document.getElementById('pasteASM');

generateASM.onclick=function(){
  const txt=textInput.value.toUpperCase();
  const lines=['; Generated Morse Assembly','; . = 46, - = 45, / = 47'];
  txt.split(' ').forEach((word,widx)=>{
    word.split('').forEach((ch,cidx)=>{
      const morse=MORSE[ch]||'';
      morse.split('').forEach(sym=>{
        if(sym==='.') lines.push('MOV AX,46','OUT AX');
        else if(sym==='-') lines.push('MOV AX,45','OUT AX');
      });
      if(cidx<word.length-1) lines.push('MOV AX,47','OUT AX'); // letter separator
    });
    if(widx<txt.trim().split(' ').length-1) lines.push('MOV AX,47','OUT AX'); // word separator
  });
  lines.push('HLT');
  asmOutput.value=lines.join('\n');
};
copyASM.onclick=()=>{ navigator.clipboard.writeText(asmOutput.value).then(()=>alert('Copied')) }
pasteASM.onclick=()=>{ codeEl.value=asmOutput.value; }

// Simulator logic left minimal for brevity (reuse your previous code)
</script>
</body>
</html>
